#version 330 core

/////////////////////////////////////////////////////////////
//////////////////////// UNIFORMS ///////////////////////////
/////////////////////////////////////////////////////////////
uniform sampler2D u_colorMap;

/////////////////////////////////////////////////////////////
//////////////////////// VARYING ////////////////////////////
/////////////////////////////////////////////////////////////
in vec4 v_color;
in float v_distanceToCamera;

/////////////////////////////////////////////////////////////
/////////////////////////// OUT /////////////////////////////
/////////////////////////////////////////////////////////////
layout(location = 0) out vec4 o_fragColor;

#ifdef FOG
#include "lib/fog/fragment.glsl"
#endif

#ifdef BRIGHTNESS
#include "lib/brightness/fragment.glsl"
#endif

/////////////////////////////////////////////////////////////
////////////////////////// MAIN /////////////////////////////
/////////////////////////////////////////////////////////////
void main() {
    o_fragColor = v_color;

#ifdef FOG
    o_fragColor = fog(o_fragColor, v_distanceToCamera);
#endif

#ifdef BRIGHTNESS
    saveBrightness(o_fragColor);
#endif
}
